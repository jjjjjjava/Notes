{"layout":"timeline","root":{"data":{"text":"<p><strong>开始</strong></p>","richText":true,"expand":true,"isActive":false,"uid":"0714e90d-8a49-45a1-91b8-44ee4d2ed92d"},"children":[{"data":{"text":"<p><span style=\"\n      color: #749336;\n      font-family: 微软雅黑, Microsoft YaHei;\n      font-size: 18px;\n      font-weight: noraml;\n      font-style: normal;\n      text-decoration: none\n    \">startup.s</span></p>","generalization":null,"richText":true,"expand":true,"isActive":false,"uid":"3ab85fcf-a841-4bc0-8a71-dae3be9e4bbd"},"children":[{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">开始</span></p>","uid":"3c638258-6ff9-415d-80df-e96af89b34f8","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p><span style=\"\n      color: #749336;\n      font-family: 微软雅黑, Microsoft YaHei;\n      font-size: 14px;\n      font-weight: noraml;\n      font-style: normal;\n      text-decoration: none\n    \">配置处理器模式堆栈空间大小</span></p>","richText":true,"expand":true,"isActive":false,"uid":"01d7d5c5-d03b-4cf5-b904-abe4068aa5f8"},"children":[]},{"data":{"text":"<p><span style=\"\n      color: #749336;\n      font-family: 微软雅黑, Microsoft YaHei;\n      font-size: 14px;\n      font-weight: noraml;\n      font-style: normal;\n      text-decoration: none\n    \">声明外部函数，导出内部全局函数</span></p>","richText":true,"expand":true,"isActive":false,"uid":"b145e9a0-eac6-49f0-99fb-50d191abc814"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">配置异常向量表，并从向量表起始位置执行复位操作</span></p>","uid":"f97ca5ba-d1ed-4dd1-8ac1-2a64ed0d1a9f","expand":true,"richText":true,"isActive":false,"note":"//预先配置\n    .code 32    //指定为32位模式。即:地址总线和数据总线长度都是32位。\n    .section .vector, \"ax\"  //指定一个向量段,向量段属性:ax(可执行) ar:可读,aw:可写。\n    .balign 4   //CPU_STACKS_SIZE将后续指令对齐到4字节边界。 即:指令的内存地址是4的倍数。\n\n//定义向量表的内容\nFUNC_DEF(vector)\n    B       reset   //无条件分支跳转到reset处\n    LDR     PC, undefineEntry\n    LDR     PC, swiEntry\n    LDR     PC, prefetchEntry\n    LDR     PC, abortEntry\n    LDR     PC, reserveEntry\n    LDR     PC, irqEntry\n    LDR     PC, fiqEntry\n    FUNC_END()"},"children":[{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">复位入口</span></p>","uid":"737ae384-cff1-46f4-9953-64386565f006","expand":true,"richText":true,"isActive":false,"note":"//定义向量表的内容\nFUNC_DEF(vector)\nB reset //无条件分支跳转到reset处"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">进入svc32_MODE+关中断</span></p>","expand":true,"richText":true,"isActive":false,"uid":"6d4f9878-4b3b-4be5-b6a4-6785b16d2f90"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">初始化堆栈</span></p>","expand":true,"richText":true,"isActive":false,"uid":"38fca092-4ba8-424c-bd3d-5460e9ff9373"},"children":[{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">循环开始，为每一个cpu执行堆栈的初始化</span></p>","uid":"3b5d73e5-964e-4fc0-8b0c-1b5d8ec2c8fa","expand":true,"richText":true,"isActive":false,"note":" BL      archMpCur"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">为cpu分配堆栈空间</span></p>","expand":true,"richText":true,"isActive":false,"uid":"a8567659-f985-4383-a86a-9e016099166d","note":"SUBNE   R1, R1, #CPU_STACKS_SIZE"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">为不同的处理器模式设置堆栈指针，以完成堆栈初始化的任务。</span></p>","expand":true,"richText":true,"isActive":false,"uid":"b45da912-3c7e-4454-820c-2e6fd7f99bb4","note":"FUNC_DEF(armInitSP)\n\n    MSR     CPSR_c, #(SVC32_MODE | DIS_INT)\n    MOV     SP, R0\n    SUB     R0, R0, #SVC_STACK_SIZE\n\n    MSR     CPSR_c, #(SYS32_MODE | DIS_INT)\n    MOV     SP, R0\n    SUB     R0, R0, #SYS_STACK_SIZE\n\n    MSR     CPSR_c, #(FIQ32_MODE | DIS_INT)\n    MOV     SP, R0\n    SUB     R0, R0, #FIQ_STACK_SIZE\n\n    MSR     CPSR_c, #(IRQ32_MODE | DIS_INT)\n    MOV     SP, R0\n    SUB     R0, R0, #IRQ_STACK_SIZE\n\n    MSR     CPSR_c, #(UND32_MODE | DIS_INT)\n    MOV     SP, R0\n    SUB     R0, R0, #UND_STACK_SIZE\n\n    MSR     CPSR_c, #(ABT32_MODE | DIS_INT)\n    MOV     SP, R0\n    SUB     R0, R0, #ABT_STACK_SIZE\n\n    MSR     CPSR_c, #(SVC32_MODE | DIS_INT)\n\n    BX      LR\n\n    FUNC_END()"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">循环结束，完成对每一个cpu的堆栈的初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"e99aaf22-d3f5-4326-bed2-a329b3568342"},"children":[]}]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">错误修正</span></p>","expand":true,"richText":true,"isActive":false,"uid":"ba862c4b-1333-41fc-9c7a-8ce7987d310d"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">cpu复位操作</span></p>","expand":true,"richText":true,"isActive":false,"uid":"90f9231e-7d3b-43da-bf95-a05bc691cb9f"},"children":[{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">cpu复位开始</span></p>","uid":"bef85fc4-301e-450c-87ba-4da3709fa124","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">获取并判断CPU id（后续根据cpu id进行主从cpu初始化）</span></p>","expand":true,"richText":true,"isActive":false,"uid":"5528ee3c-7717-4357-87fe-687a46f9e573","note":"主cpu进入主cpu复位操作，从cpu进入从cpu复位操作。主从cpu复位操作不同\n"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">主cpu初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"427ab6c2-4d71-4f94-82bb-3f14b5064b26"},"children":[{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">关Cache,MMU以确保 CPU 复位后处于一种干净、可预测的状态</span></p>","expand":true,"richText":true,"isActive":false,"uid":"8128d2d4-c151-4e44-8c3b-327c4899407a"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">初始化Data段，&nbsp;将数据段从 ROM 复制到 RAM,以初始化全局变量和静态变量</span></p>","expand":true,"richText":true,"isActive":false,"uid":"6cfcc66a-1feb-471f-8bf0-4643e2efbd66"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">清零BSS段，&nbsp;BSS:未初始化的全局变量和静态变量所占用的一部分内存</span></p>","expand":true,"richText":true,"isActive":false,"uid":"8bb75513-6780-4a09-9fd7-624997dedd14"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">调用bspinit中targetInit函数，实际函数体内无代码</span></p>","expand":true,"richText":true,"isActive":false,"uid":"4726a523-a2b4-43e4-b882-ea3cc417b682"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">调用bspinit中halPrimraryCpuMain</span></p>","expand":true,"richText":true,"isActive":false,"uid":"7616d468-f754-4491-9843-fee71e4d7dc2","associativeLineTargets":["439cc970-5781-4413-9028-f46563309356"],"associativeLineTargetControlOffsets":[[{"x":195.5,"y":0},{"x":-198.75,"y":12.73829087921115}]],"associativeLinePoint":[{"startPoint":{"x":1581,"y":1083.5},"endPoint":{"x":1866.5,"y":518.2617091207889,"dir":"left","range":-6.761709120788824}}],"associativeLineText":{"439cc970-5781-4413-9028-f46563309356":"调用"}},"children":[]}]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">从cpu初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"9983d755-5914-4922-9272-4bc5be7f539c"},"children":[{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">关Cache,MMU以确保 CPU 复位后处于一种干净、可预测的状态</span></p>","uid":"c0b681d2-664b-47f3-93b8-da9a15eaebcd","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">调用bspinit中halSecondaryCpuMain</span></p>","uid":"84a94cd6-8916-470a-8cca-fc823baf4e4b","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">cpu复位结束</span></p>","expand":true,"richText":true,"isActive":false,"uid":"03119a50-fe5a-43b1-8f56-22e4359b9161"},"children":[]}]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">整体复位结束</span></p>","expand":true,"richText":true,"isActive":false,"uid":"33cd5bc3-f473-4570-8c2f-961f09ed8cdb"},"children":[]}]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">结束</span></p>","uid":"105e23af-121c-4c07-b176-d2f0e6e07e7a","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 18px;\">halPrimraryCpuMain</span></p>","expand":true,"richText":true,"isActive":false,"uid":"439cc970-5781-4413-9028-f46563309356","associativeLineTargets":[],"associativeLineTargetControlOffsets":[],"associativeLinePoint":[],"associativeLineText":{}},"children":[{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">开始</span></p>","uid":"83fdb10f-3288-4a40-a473-61571fcebacb","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">设备树初级初始化，传递设备树基地址作为参数</span></p>","expand":false,"richText":true,"isActive":false,"uid":"5e767fc0-b579-4d96-83f4-421781d939a0","note":"主要是获取chosen节点中启动参数和cells节点中对设备树成员大小的描述"},"children":[{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">设备树有效性及合法性检查</span></p>","uid":"c6933e53-aee8-4c56-a966-28a0c799c57e","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">__deviceTreeRootNodesScan扫描根节点信息</span></p>","expand":true,"richText":true,"isActive":false,"uid":"22e79002-2231-4391-b8b4-b77a09aa65d9"},"children":[{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">获取chosen节点，将bootargs存储在_G_ulKernelParam中</span></p>","uid":"3d2583af-d854-442f-a36c-cfa11112dd1b","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">获取cells节点，存储在_G_iRootAddrCells和_G_iRootSizeCells中</span></p>","uid":"1955bc96-21f6-4289-afc4-c2794fe20da2","expand":true,"richText":true,"isActive":false,"generalization":null,"note":"cells有两个属性：address和size，分别表示设备树中address和size数据的表示\naddress-cells 被设置为1，表示每个地址由一个单独的32位整数表示\nsize-cells 也被设置为1，表示每个大小由一个单独的32位整数表示。"},"children":[]}]}]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">从设备树中获取内核启动参数</span></p>","expand":false,"richText":true,"isActive":false,"uid":"6d070deb-383c-46e9-9deb-4297b1d02858"},"children":[{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">将bootargs从_G_ulKernelParam中复制保存到pcStartParam</span></p>","uid":"d2fc323d-64ea-486a-8762-de0d3872ea2a","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">API_KernelStartParam设置内核启动参数, 传递pcStartParam作为实参</span></p>","expand":false,"richText":true,"isActive":false,"uid":"d18d0b45-ac71-41cb-b911-abbded7381f6"},"children":[{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">赋值_K_ulNcpus</span></p>","expand":true,"richText":true,"isActive":false,"uid":"0c65f21a-addc-4fef-8b0b-fa1af9350f56"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">赋值_K_pfuncKernelDebugLog</span></p>","expand":true,"richText":true,"isActive":false,"uid":"1fe502ae-b10b-45a8-a995-251216c872ab"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">赋值_K_pfuncKernelDebugError</span></p>","expand":true,"richText":true,"isActive":false,"uid":"4fc1573f-de22-4491-a972-0f16a428ac46"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">设置LW_KERN_FPU_EN_SET</span></p>","expand":true,"richText":true,"isActive":false,"uid":"d0c86dab-0e2f-41a4-8b7a-305b865de8ba"},"children":[]},{"data":{"text":"<p><span style=\"font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54); font-size: 14px;\">赋值_K_bHeapCrossBorderEn</span></p>","expand":true,"richText":true,"isActive":false,"uid":"f7492929-7592-4e64-995f-55d1e310e35a"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">调用API_RootFsMapInit进行根文件系统映射初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"303b456a-3f6a-4531-85fd-17bce31a3b8c","note":"主要是截取描述映射关系的字符串为下面两个数据结构赋值\nstatic LW_ROOTFS_MAP_NODE   _G_rfsmapRoot   = { \"/\" , \"/media/hdd1\" };\nstatic LW_ROOTFS_MAP_NODE   _G_rfsmapSubp[] = {\n    { \"/var\" , \"\" },\n    { \"/usr\" , \"\" },\n    { \"/tmp\" , \"\" },\n    { \"/sbin\", \"\" },\n    { \"/root\", \"\" },\n    { \"/qt\"  , \"\" },\n    { \"/lib\" , \"\" },\n    { \"/home\", \"\" },\n    { \"/etc\" , \"\" },\n    { \"/boot\", \"/media/hdd0\" },\n    { \"/bin\" , \"\" },\n    { \"/apps\", \"\" }\n};"},"children":[]}]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">API_KernelStart启动内核，并传递参数</span></p>","expand":true,"richText":true,"isActive":false,"uid":"329e046c-cdcc-4e61-906d-627d38a49a94","note":"本质是执行以下函数：\n#define API_KernelStart       API_KernelPrimaryStart\n传递如下参数：\nusrStartup    系统启动中的用户回调\npvKernelHeapMem    内核堆内存首地址\nstKernelHeapSize   内核堆大小\npvSystemHeapMem    系统堆内存首地址\nstSystemHeapSize   系统堆大小"},"children":[{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">对传递的参数进行有效性检查</span></p>","uid":"5bc65882-c1e1-4a0f-8a76-2d3e2c4406b9","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">_KernelPrimaryLowLevelInit内核底层初始化</span></p>","uid":"0e15aae5-209f-4f90-a35f-5763b27757e1","expand":true,"richText":true,"isActive":false,"note":"传递以下参数：\npvKernelHeapMem, stKernelHeapSize,\n                               pvSystemHeapMem, stSystemHeapSize","associativeLineTargets":["335ca162-e377-48f1-b327-bc4c675b2167"],"associativeLineTargetControlOffsets":[[{"x":94,"y":0},{"x":-174.35933027057126,"y":-0.7598211613932904}]],"associativeLinePoint":[{"startPoint":{"x":2683,"y":859},"endPoint":{"x":2871,"y":512.6068532143072,"dir":"left","range":-1.1068532143072096}}],"associativeLineText":{"335ca162-e377-48f1-b327-bc4c675b2167":""}},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">bspIntInit()初始化中断系统</span></p>","expand":true,"richText":true,"isActive":false,"uid":"c3c1b61a-0dd3-4078-b4ea-00bc6256fb59"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;\">_KernelHighLevelInit()内核高级初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"4ee8b97a-43a9-4206-b21a-5340178b0713","associativeLineTargets":["00db59d2-723f-46e7-9f69-f2a8485bc601"],"associativeLineTargetControlOffsets":[[{"x":1081.75,"y":0},{"x":-1203.8888888888891,"y":-4.207483762123786}]],"associativeLinePoint":[{"startPoint":{"x":2265,"y":813},"endPoint":{"x":4428.5,"y":394.61949985061034,"dir":"left","range":0.8805001493896715}}]},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">_cppRtInit()cpp运行时库初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"5e52a9bd-873a-4142-8449-2d87843743c7"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">pfuncStartHook调用传递来的回调函数，进行用户系统初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"f27762d3-ecf9-4f07-8c46-775c6f615a33"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">_resInit 监视记录资源情况</span></p>","expand":true,"richText":true,"isActive":false,"uid":"cf163e50-e63f-4c0e-b650-0e8763363f86"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">_KernelBootSecondary 从核初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"9dbd39a4-eeec-4c4d-9d13-edf3ddf1299d"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">_KernelPrimaryEntry(LW_CPU_GET_CUR()) 启动内核</span></p>","expand":true,"richText":true,"isActive":false,"uid":"284831a2-d2fd-4401-8f50-3b56caffd712"},"children":[]}]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">结束</span></p>","expand":true,"richText":true,"isActive":false,"uid":"fad79144-1537-4e53-b118-17239c946d31"},"children":[]}]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 18px;\">_KernelPrimaryLowLevelInit内核底层初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"335ca162-e377-48f1-b327-bc4c675b2167"},"children":[{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">_GlobalPrimaryInit全局变量初始化</span></p>","uid":"d853ff7a-383a-4988-ac88-fd56e5db33e8","expand":true,"richText":true,"isActive":false,"associativeLineTargets":["eac161a4-e900-431c-829b-45844ab2aa9c"],"associativeLineTargetControlOffsets":[[{"x":52,"y":0},{"x":-99.55128205128312,"y":-5.570286924244442}]],"associativeLinePoint":[{"startPoint":{"x":3321.5,"y":569},"endPoint":{"x":3425.5,"y":512.96772282168,"dir":"left","range":-1.4677228216800242}}]},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">_ScheduleInit调度器初始化，没有实际函数</span></p>","expand":true,"richText":true,"isActive":false,"uid":"9c0992c8-bcde-4c42-a02e-a7da35deceaf"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">_StackCheckInit堆栈检查初始化，将 _K_stkFreeFlag 的每个 16 位都设置为 0xab</span></p>","uid":"1e424b44-1334-4691-b7f5-e0e1667ae362","expand":true,"richText":true,"isActive":false,"note":"_K_stkFreeFlag管理堆栈区域的状态，例如标志某个堆栈区域是否空闲可用。"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">_InterVectInit中断向量表初始化，将每个中断源的自旋锁初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"c9290b97-d061-490e-87c5-8c0324ebd8a0","note":"for (i = 0; i < LW_CFG_MAX_INTER_SRC; i++) {\n        pidesc = LW_IVEC_GET_IDESC(i);\n        LW_SPIN_INIT(&pidesc->IDESC_slLock);\n    }\n\n#define LW_IVEC_GET_IDESC(vector)       \\\n        (&_K_idescTable[vector])\n\n\n__KERNEL_EXT LW_CLASS_INTDESC        _K_idescTable[LW_CFG_MAX_INTER_SRC];\n\nLW_CFG_MAX_INTER_SRC：系统最大中断源：512，每个中断源对应一个中断描述符。里面有中断处理函数和中断清除函数"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">_ReadyTableInit就绪表初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"c33bc69d-7281-4533-ba17-9ad0bf877608","note":"初始化每个cpu的就绪表和全局就绪表中的位图"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">_ThreadIdInit 线程初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"cbf53966-3f10-48ab-a5c2-153825612bd2","note":"初始化TCB对象资源管理表_K_resrcTcb\n同时初始化TCB类中的部分数据结构：将TCB的空闲资源链表连接起来，设置TCB中的缓冲区编号，初始化TCB的自旋锁"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">_EventInit 事件初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"10424810-f528-4eb6-b0f3-f6cf40088742","note":"\"事件\"通常指的是一种用于同步和通信的机制。这些事件可能是信号、中断、消息、计时器到期等，用于告知系统或应用程序发生了某个特定的事情，需要相应的处理。\n\n这里函数的主要任务：\n1. 设置事件资源表的表头和表尾，最大数量和已使用数量\n2. 初始化事件缓冲区中事件的类型和缓冲区下标，同时为他们建立资源连接。"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">_TimerInit初始化定时器</span></p>","expand":true,"richText":true,"isActive":false,"uid":"c06e157e-0e02-4e1f-9f6c-a08d6445cf9c","note":"主要任务：\n1. 设置定时器对象资源管理表的表头和表尾，最大数量和已使用数量\n2. 初始化定时器缓冲区中定时器对象的的类型，下标和自旋锁，同时为他们建立资源连接。\n3. 初始化高速定时器唤醒表：包括双向管理表头部，非固定周期唤醒任务，唤醒任务参数，全部为0\n4. 初始化普通定时器唤醒表：包括包括双向管理表头部，唤醒任务参数这些为0。非固定周期唤醒任务为_ITimerWakeup"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">_TimeCvtInit超时换算函数初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"20802536-1026-4d4c-85a8-704a5a367a61"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">_PriorityInit优先级控制块初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"a760e496-7d6a-42ef-83ca-ba37c8515574","note":"1. 初始化每个CPU拥有的优先级控制块\n2. 初始化全局就绪表的优先级控制块"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">_EventSetInit事件集初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"8ec5eabf-b30f-48ff-b9b1-d3f0ddf598c5","note":"1. 设置事件集对象资源管理表的表头和表尾，最大数量和已使用数量\n2. 初始化事件集控制块缓冲区中每个事件集控制块"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">_PartitionInit定长内存初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"3bba31c4-1401-47ca-9dcb-883190185519","note":"1. 设置Partition对象资源管理表的表头和表尾，最大数量和已使用数量\n2. 初始化Partition缓冲区中每个Partition控制块"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">_MsgQueueInit消息队列初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"db6a4e5f-30c0-4b75-9c8e-498a90b0482a","note":"1. 设置消息队列对象资源管理表的表头和表尾，最大数量和已使用数量\n2. 初始化消息队列控制块缓冲区中每个消息队列控制块"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">_RmsInit精度单调调度器初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"36a60b50-9c70-44c6-bc55-9df65d7c6970"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">_RtcInit RTC单元初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"29444c8d-eceb-4c93-a24b-6a967525cc0b"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">_HeapInit堆变长内存初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"dc39d1a3-0d83-4e8d-b4ce-77c4881bc53b","note":"1. 用内存堆对象缓冲区中内存堆对象控制块设置内存堆对象资源管理表的表头和表尾，最大数量和已使用数量\n2. 初始化内存堆对象缓冲区中每个内存堆对象控制块，并将其连接起来"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">获取当前cpu，设置cpu的当前TCB和cpu运行状态</span></p>","expand":true,"richText":true,"isActive":false,"uid":"e74cd807-538a-45d3-b9c7-6e1b43baa8f9"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">_HeapKernelInit内核堆初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"5a3230b8-e1b4-400a-a1ee-cd155d587052","note":"_HeapCreate建立一个内存堆\n\n_HeapCreate：\n1. 调用_Allocate_Heap_Object从堆资源链表中分配一个堆控制块\n2. _HeapCtor构造内核堆\n    1. 页面对齐\n    2. 初始化堆中第一个分段，加入控制表和邻居表\n    3. 设置堆控制块参数\n    4. 建立堆的锁\n\n3. _CrashDumpSet设置堆末尾的2048个字节为系统/应用崩溃信息记录位置."},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">_HeapSystemInit系统堆初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"85d1b1d5-fce6-4996-b982-c17f116a9201","note":" _K_pheapSystem = _K_pheapKernel;    \n设置只使用内核堆，系统堆就是内核堆"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">_HeapPagetabInit页表堆内存初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"f7a52742-3383-48f9-b1e1-4ab385000def"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">LW_KERNEL_JOB_INIT初始化内核工作队列</span></p>","expand":true,"richText":true,"isActive":false,"uid":"ab7de609-c48f-4234-98e3-5b5e3573949a"},"children":[]}]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 18px;\">_GlobalPrimaryInit全局变量初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"eac161a4-e900-431c-829b-45844ab2aa9c"},"children":[{"data":{"text":"<p><span style=\"\n      color: #749336;\n      font-family: 微软雅黑, Microsoft YaHei;\n      font-size: 14px;\n      font-weight: noraml;\n      font-style: normal;\n      text-decoration: none\n    \">设置系统状态_K_ucSysStatus为初始化状态INIT</span></p>","uid":"b033008f-4329-4b79-9eae-0eaa3a7f2255","expand":true,"richText":true,"isActive":false,"note":"系统状态分为以下两种：\n#define LW_SYS_STATUS_INIT          0\n#define LW_SYS_STATUS_RUNNING       1\n\nINIT表示处于初始化状态，防止二次初始化"},"children":[]},{"data":{"text":"<p><span style=\"\n      color: #749336;\n      font-family: 微软雅黑, Microsoft YaHei;\n      font-size: 14px;\n      font-weight: noraml;\n      font-style: normal;\n      text-decoration: none\n    \">初始化内核中关键性的自旋锁（简单的对自旋锁的数据成员赋初值）</span></p>","expand":true,"richText":true,"isActive":false,"uid":"0383720f-1309-4fd0-a9d2-8c7402d4a828","note":"初始化以下三类自旋锁：\n  &_K_klKernel.KERN_slLock);                             /*  初始化内核自旋锁            */\n &_K_slKernTime.SLCA_sl);                               /*  初始化内核时间自旋锁        */\n&_K_slcaAtomic.SLCA_sl);                               /*  初始化原子操作自旋锁        */\n  \n      \n初始化的操作如下：        \n\n    psl->SL_sltData.SLD_uiLock = 0;                                     /*  0: 未锁定状态  1: 锁定状态  */\n    psl->SL_pcpuOwner          = LW_NULL;\n    psl->SL_ulCounter          = 0;\n    psl->SL_pvReserved         = LW_NULL;\n    KN_SMP_WMB();    //内存操作同步，确保在它之前的内存访问操作都完成后，再执行它之后的内存访问操作。"},"children":[]},{"data":{"text":"<p><span style=\"\n      color: #749336;\n      font-family: 微软雅黑, Microsoft YaHei;\n      font-size: 14px;\n      font-weight: noraml;\n      font-style: normal;\n      text-decoration: none\n    \">内核关键性数据初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"e56459a8-ce0a-4325-82fd-fa563d642325"},"children":[{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">__cpuPrimaryInit初始化cpu控制块</span></p>","uid":"7ca0c25d-405d-458b-988e-db33dac80e6a","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">开始for循环遍历初始化所有cpu</span></p>","uid":"4229ff0c-364d-4bfe-83ae-2b85f2e07067","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">设置cpu_ulStatus为初始状态</span></p>","expand":true,"richText":true,"isActive":false,"uid":"ebab8ab0-9d37-41ac-9c58-0f3f95e09b98","note":"LW_CPU_GET(i)->CPU_ulStatus = 0ul; \n\n实际：直接从cpu表中根据id获取cpu\n#define LW_CPU_GET(id)       (&_K_cpuTable[(id)])                     \n  /*  获得指定 CPU 结构           */"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">初始化当前cpu拥有的tcb自旋锁</span></p>","expand":true,"richText":true,"isActive":false,"uid":"50d80547-d9ec-4825-b5d7-83d361c66106","note":"每个cpu可以并行执行一个线程，所以每个cpu对应一个TCB\n\n__KERNEL_EXT        LW_CLASS_TCB          \n  _K_tcbDummy[LW_CFG_MAX_PROCESSORS];\n\n\n用如下代码进行初始化操作\nLW_SPIN_INIT(&_K_tcbDummy[ulCPUId].TCB_slLock);"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">清除cpu的亲和性</span></p>","expand":true,"richText":true,"isActive":false,"uid":"51fc8086-1ab0-4eb8-b1b1-481754cf3df2","note":"避免只运行亲和线程\n\n(pcpu)->CPU_bOnlyAffinity = LW_FALSE"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">清除cpu核间中断</span></p>","expand":true,"richText":true,"isActive":false,"uid":"8b52f930-6244-4e80-9b97-08f127b7d014","note":"CPU_iIPIPend.counter = 0"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">结束for循环，完成所有cpu的初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"1540ab40-531e-451d-a7b6-8a374e3653ae"},"children":[]}]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">__interPrimaryStackInit初始化中断堆栈</span></p>","uid":"4c7a3a6e-a710-4919-b119-6fb0ac5adc49","expand":true,"richText":true,"isActive":false,"note":" 初始化中断堆栈, (SylixOS 在 SMP 中每一个 CPU 都可以接受中断)","generalization":null},"children":[{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">初始化中断向量表的自旋锁</span></p>","uid":"db369b8a-1ca8-4b96-895c-33f707a16f59","expand":true,"richText":true,"isActive":false,"note":"LW_SPIN_INIT(&_K_slcaVectorTable.SLCA_sl)"},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">为每个cpu初始化中断堆栈</span></p>","uid":"60f7988f-9820-4f24-8ecb-63b34276d0a6","expand":true,"richText":true,"isActive":false,"generalization":null,"note":"主要是：用_K_stkInterruptStack[i][0]的地址为CPU_pstkInterBase（cpu中断堆栈基址）赋值，并且用memset完成对_K_stkInterruptStack的初始化操作"},"children":[{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">开始for循环，进行cpu的中断堆栈的初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"551d9dfe-664f-42d2-91cf-24c39ebceeca"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">获取cpu控制块指针</span></p>","uid":"8f1097cf-841b-424e-ad4f-1e989cc38478","expand":true,"richText":true,"isActive":false,"note":"pcpu = LW_CPU_GET(i)"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">获取当前cpu对应的中断堆栈的内存起始地址</span></p>","uid":"140e5ce6-dbca-4522-9b55-4946acd776fa","expand":true,"richText":true,"isActive":false,"note":"pstk = &_K_stkInterruptStack[i][(LW_CFG_INT_STK_SIZE / sizeof(LW_STACK)) - 1];\n\n_K_stkInterruptStack[i]：获取 _K_stkInterruptStack 数组中第i个堆栈\n\n(LW_CFG_INT_STK_SIZE / sizeof(LW_STACK)) - 1：计算了堆栈的最后一个元素的索引。\n\n\n总体：取得计算出的堆栈最后一个元素的地址。"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">将起始地址以页对齐方式赋给cpu</span></p>","expand":true,"richText":true,"isActive":false,"uid":"31f71cb2-2f41-4e4a-925a-67d0c842921b","note":"pcpu->CPU_pstkInterBase = (PLW_STACK)ROUND_UP(pstk, ARCH_STK_ALIGN_SIZE);"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">初始化中断堆栈内存区</span></p>","expand":true,"richText":true,"isActive":false,"uid":"7feb2c58-dd8a-4cf1-bf1e-99dc9d23459f","note":"lib_memset(_K_stkInterruptStack[i], LW_CFG_STK_EMPTY_FLAG, LW_CFG_INT_STK_SIZE);"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">结束for循环，完成所有中断堆栈的初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"56b75944-a257-4645-b664-0ef9f6c833ba"},"children":[]}]}]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">__miscPrimarySmpInit与 SMP 有关的全局变量初始化</span></p>","uid":"54a5a525-94e2-4a5d-ba77-f07a171a887e","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p><span style=\"font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54); font-size: 14px;\">在支持多核处理器系统的情况下，为每个核初始化其数据成员</span></p>","uid":"3479af9b-118b-4f4d-a632-4769c0503c77","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">在支持多核处理器系统的情况下，为每个核分配一个唯一的物理 CPU ID，并统计物理 CPU 的数量。</span></p>","uid":"ce502fa8-eaf2-4dcf-a1a6-ed9c8243a168","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">在支持多核处理器系统的情况下，为每个核分配一个唯一的物理 CPU ID，并统计物理算力簇的个数。</span></p>","uid":"912e6e66-2917-42fb-b385-d2a6a3c009f8","expand":true,"richText":true,"isActive":false},"children":[]}]}]},{"data":{"text":"<p><span style=\"\n      color: #749336;\n      font-family: 微软雅黑, Microsoft YaHei;\n      font-size: 14px;\n      font-weight: noraml;\n      font-style: normal;\n      text-decoration: none\n    \">内核关键性状态变量初始化</span></p>","uid":"c287e514-c658-456d-bbb3-a153d9a0477c","expand":true,"richText":true,"isActive":false,"note":" /*\n     *  内核关键性状态变量初始化\n     */\n    _K_atomic64KernelTime.counter = 0;\n    \n#if LW_CFG_THREAD_CPU_USAGE_CHK_EN > 0\n    _K_ulCPUUsageTicks       = 1ul;                                     /*  避免除 0 错误               */\n    _K_ulCPUUsageKernelTicks = 0ul;\n#endif\n\n    _K_usThreadCounter = 0;                                             /*  线程数量                    */\n    _K_plineTCBHeader  = LW_NULL;                                       /*  TCB 管理链表头              */\n    _K_ulNotRunError   = 0ul;                                           /*  系统未启动时错误存放变量    */\n    \n    __WAKEUP_INIT(&_K_wuDelay, LW_NULL, LW_NULL);\n`#if LW_CFG_SOFTWARE_WATCHDOG_EN > 0\n    __WAKEUP_INIT(&_K_wuWatchDog, LW_NULL, LW_NULL);\n#endif                                                                  /*  LW_CFG_SOFTWARE_WATCHDOG_EN */\n    \n#if LW_CFG_THREAD_CPU_USAGE_CHK_EN > 0\n    __LW_TICK_CPUUSAGE_DISABLE();                                       /*  关闭 CPU 利用率测试         */\n#endif                                                                  /*  LW_CFG_THREAD_CPU_USAGE_... */`\n"},"children":[{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">系统时间计数器置0</span></p>","uid":"2757541e-d689-478e-8a22-9e3df1982639","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">cpu利用率置1，cpu内核利用率置0</span></p>","uid":"415c87e5-563a-4b1f-8478-1e4d979deadc","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">线程数量置0</span></p>","uid":"aaeff3dc-4a84-4edc-a8e0-8e48ce9dc611","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">TCB管理链表头置空</span></p>","uid":"8058a636-8d6b-4e30-9278-cc5918bc56ba","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">系统未启动时错误存放变量置空</span></p>","expand":true,"richText":true,"isActive":false,"uid":"0267577d-5ced-413e-9428-1b7f363627b0"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">初始化睡眠线程唤醒表和开门狗睡眠唤醒表</span></p>","expand":true,"richText":true,"isActive":false,"uid":"8ec1ad6a-43a1-4594-ab3b-33d1d537b8fd"},"children":[]},{"data":{"text":"<p><span style=\"color: rgb(116, 147, 54); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 14px;\">关闭cpu利用率测试</span></p>","expand":true,"richText":true,"isActive":false,"uid":"9da46309-a4f8-4c04-9b9f-765efb57553a"},"children":[]}]}]},{"data":{"text":"<p><span style=\"font-size: 18px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">_KernelHighLevelInit()内核高级初始化</span></p>","expand":true,"richText":true,"isActive":false,"uid":"00db59d2-723f-46e7-9f69-f2a8485bc601"},"children":[{"data":{"text":"<p><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(116, 147, 54);\">分支主题</span></p>","uid":"4b52cf7b-4a83-41e0-bdcb-e969a328cbce","expand":true,"richText":true,"isActive":false},"children":[]}]}]},"theme":{"template":"avocado","config":{}},"view":{"transform":{"scaleX":0.8999999999999999,"scaleY":0.8999999999999999,"shear":0,"rotate":0,"translateX":-2333.1192307692304,"translateY":-341.7554298642533,"originX":0,"originY":0,"a":0.8999999999999999,"b":0,"c":0,"d":0.8999999999999999,"e":-2333.1192307692304,"f":-341.7554298642533},"state":{"scale":0.8999999999999999,"x":-2333.1192307692304,"y":-341.7554298642533,"sx":-2350.1192307692304,"sy":-430.7554298642533}}}